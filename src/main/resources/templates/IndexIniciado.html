<!DOCTYPE html>
<html lang="es" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
<link rel="stylesheet" href="../static/style.css">
<meta charset="utf-8">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Monoton&family=Pacifico&family=Righteous&display=swap" rel="stylesheet">

<title>Index Iniciado</title>
<link rel="icon" type="icon/png" sizes=""href="assets/favicon.png">
</head>


<body>

 <!--<div th:fragment="navBarInicio"> --> 
  <nav class="nav">
    <a class="navbar-brand" id="nav-logo"  href="/loginExitoso">
         <img src="https://drive.google.com/uc?export=download&id=1NCoNyhyGOZLjZlD187jCdu9aYntNhV68" width="160">
       </a>
     
     <a class="nav-link" th:href="@{/usuario/perfil/(id=${session.usuariosession.id})}">Mi cuenta</a>
     <a class="nav-link" th:href="@{/usuario/misQuerys/(idUsuario=${session.usuariosession.id})}">Mis Query's</a>
     <a class="nav-link" href="/preguntasFrecuentesIn">Preguntas Frecuentes</a> 
     <!-- <a class="nav-link" href="/encuesta/listar">Querys</a> -->
    <!-- <a class="nav-link" href="/logout">Cerrar Sesión</a> -->
 </nav>
<!-- </div> -->

<div> 

  <div id="logo">
    <img src="https://drive.google.com/uc?export=download&id=1kp0e1e4Z0jUJNHPLR_Mi21QL7Byls9Gp" width="700" height=auto/>
    </div>

<div> <!--Crear una nueva Query -->
<h1 id="hh1">Crear nueva Query</h1>
<form th:action="@{/encuesta/crearEnc}">
   
    <input type="hidden" name="id" th:value="${session.usuariosession.id}">    
    <button class="btn btn-primary" role="button" id="btnIndex">Click acá</button>
</form>

    <!--SE SACÓ EL HREF DEL BOTÓN. PARA QUE FUNCIONE SE LO ENCERRÓ EN ETIQUETAS FORM, Y AL FORM 
        SE AGREGÓ UN TH:ACTION="" CON LA LLAMADA AL CONTROLADOR
    
    OBSERVACIÓN: ESTO NO FUNCIONÓ POR SI SOLO: th:action="@{/encuesta/crearEnc(id=${session.usuariosession.id})}"
                 SE TUVO QUE AGREGAR EL INPUT CLASS="HIDDEN" CON EL VALUE USUARIOSESSION.ID. AGREDADO ESO,
                 SE PUDO SACAR LA PORCIÓN "(id=${session.usuariosession.id}) DE LA LLAMADA AL CONTROLADOR EN EL
                 FORM   :)  :)   "-->
</div>

<div><!--Ranking-->
    <h1 id="hh1"> TOP 5 QUERY'S MÁS VOTADAS: </h1>
    <p th:if="${error!=null}" th:text="${error}"></p>
    <table class="table" id="table-ranking">
      <thead id="head-ranking">
       <tr>
       <th scope="col" > Puesto </th>
       <th scope="col"> Query </th>
       </tr>
      </thead>
      
      <tbody id="body-ranking">
        <tr th:each="query:${querys}">
          <th scope="row" th:text="${'#'+(querys.indexOf(query)+1)}"> </th>
          <td>
              <a id="query-ranking" th:href="@{/resultados/visualizacion(idEncuesta=${query.id})}" th:text="${query.titulo}"> Pastelito Membrillo vs. Pastelito Batata </a></td><!-- consulta para que muestre los primeros 5 resultados -->
        </tr>
      </tbody>
    </table>
  </div>
  
    <a href="/encuesta/listar"><button class="btn btn-primary" role="button" id="btnIndex"> Más Querys! </button>
        </a>
<div>
  <footer class="pie-pagina">
    <div class="grupo-1">
      <div class="box">
        <figure>
          <a>
            <img src="https://drive.google.com/uc?export=download&id=1NCoNyhyGOZLjZlD187jCdu9aYntNhV68" width="160"
              class="imagen-footer">
          </a>
        </figure>
        <br>
        <div class="grupo-2">
          <a> &copy;2022 A MOVER LA QUERY!</a>
          <br>
          <a>Todos los Derechos Reservados</a>

    </div>
</div>
  </footer>
</div>

</body>
</html>